FROM python:3.9.6

WORKDIR /app

# copy repo contents and install deps
RUN git clone https://github.com/ml-evs/optimade-misc-datasets
WORKDIR /app/optimade-misc-datasets
RUN pip install -r requirements.txt

ENV PYTHONPATH "/app/optimade-optimade-misc-datasets/optimade_misc_datasets"

# copy configs and startup scripts
COPY optimade_misc_config.json /app/optimade_config.json

# run web server
CMD ["/app/optimade-misc-datasets/start_production.sh"]
